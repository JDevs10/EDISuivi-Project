<div style="min-height: 80vh; margin-bottom: 100px;">
    <div id="panel-header-empty" class="panel-header">
    </div>
    <!-- <div id="main-content-loading" style="width: '100%';">
        <div style="text-align: center;">
            <p style="margin: 50px; font-size: 30px; font-weight: bold;">Chargement de la commande....</p>
        </div>
    </div> -->

    <div id="main-content-d-cmd">

        <div style="background-color: #fff; padding: 10px; border: solid; border-width: 1px; border-color: #000;">
            <div class="my-row">
                <div class="col-xs-10 col-sm-8 col-lg-10">
                    <div class="mr-auto">
                        <div id="Header-cmd-info-1" class="container">
                            <div class="row">
                                <p class="col-sx-6" style="padding: 5px; margin-right: 20px;"><span style="font-weight: bold;">Référence : </span>{{order.ref}}</p>
                                <p class="col-sx-6" style="padding: 5px; margin-right: 20px;"><span style="font-weight: bold;">Nom Société : </span>{{order.client1}}</p>
                                <p class="col-sx-6" style="padding: 5px; margin-right: 20px;"><span style="font-weight: bold;">Réf. client :  </span>{{order.client2}}</p>
                                <p class="col-sx-6" style="padding: 5px; margin-right: 20px;"><span style="font-weight: bold;">Assigné : </span><span style="text-decoration: underline;">{{order.assign}}</span></p>
                            </div>
                        </div>

                        <div id="Header-cmd-info-2" class="container">
                            <div class="row">
                                <table style="width: 400px;display: block;overflow-x: auto;white-space: nowrap;">
                                    <tHead class="cmd-table-tbody">
                                        <tr class="cmd-table-thead">
                                            <th class="col-sx-6" style="padding: 5px; margin-right: 5px;">Référence</th>
                                            <th class="col-sx-6" style="padding: 5px; margin-right: 5px;">Nom Société</th>
                                            <th class="col-sx-6" style="padding: 5px; margin-right: 5px;">Réf. client</th>
                                            <th class="col-sx-6" style="padding: 5px; margin-right: 5px;">Assigné</th>
                                        </tr>
                                    </tHead>
                                    <tbody>
                                        <tr class="cmd-table-tbody-tr">
                                            <td class="col-sx-6" style="padding: 5px; margin-right: 5px;">{{order.ref}}</td>
                                            <td class="col-sx-6" style="padding: 5px; margin-right: 5px;">{{order.client1}}</td>
                                            <td class="col-sx-6" style="padding: 5px; margin-right: 5px;">{{order.client2}}</td>
                                            <td class="col-sx-6" style="padding: 5px; margin-right: 5px;"><span style="text-decoration: underline;">{{order.assign}}</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <br>
                        </div>
                    </div>

                </div>
                <div class="col-xs-2 col-sm-4 col-lg-2" >
                    <div id="Header-statut-cmd-info-1" style="background-color: #3c6389; color: #fff; border-radius: 5px; text-align: center; width: 150px; margin: 0 0 0 auto">
                        <p style="padding: 5px;">{{order.status}}</p>
                    </div>
                    <div id="Header-statut-cmd-info-2" style="background-color: #3c6389; color: #fff; border-radius: 5px; text-align: center; width: 150px; margin: 0 0 0 auto">
                        <p id="Header-statut-cmd-info-2" style="padding: 5px;"><span style="font-weight: bold;">Statut : </span>{{order.status}}</p>
                    </div>
                </div>

                <div class="cmd-action">
                    <button class="cmd-action-btn" (click)="back();">Retour</button>
                    <!-- <button class="cmd-action-btn-block" (click)="download_bl();">Voir BL</button>
                    <button class="cmd-action-btn-block" (click)="download_invoice();">Voir Facture</button> -->
                </div>
            </div>

            <br><br>
            <!-- col-xs-12 col-sm-5 col-md-4 col-xl-3 -->
            <div class="container">
                <div class="row">
                    <div class="" style="margin: 10px;">
                        <span><span style="font-weight: bold;">Date de Saisie : </span>{{order.dateCommande}}</span><br>
                        <span><span style="font-weight: bold;">Date de Création : </span>{{order.createDate}}</span><br>
                        <span><span style="font-weight: bold;">Date de Validation : </span>{{order.validDate}}</span><br>
                        <span><span style="font-weight: bold;">Date de Livraison : </span>{{order.deliveryDate}}</span><br>
                        <span><span style="font-weight: bold;">Date de Réception: </span>{{order.receptionDate}}</span><br>
                    </div>
                    <div class="cmd-adresse">
                        <div class="header-cmd-adresse">
                            <p>Adresse de livraison</p>
                        </div>
                        <div class="body-cmd-adresse">
                            <p style="padding-right: 10px;" id="delivery-adress-text">{{order.deliveryAddress}}</p>
                        </div>
                    </div>
                    <div class="cmd-adresse">
                        <div class="header-cmd-adresse">
                            <p>Adresse de facturation</p>
                        </div>
                        <div class="body-cmd-adresse">
                            <p style="padding-right: 10px;" id="invoice-adress-text">{{order.invoiceAddress}}</p>
                        </div>
                    </div>
                    <div class=""  style="margin: 10px; ">
                        <span><span style="font-weight: bold;">Créateur de la commande : </span>{{order.userCreated}}</span><br>
                        <span><span style="font-weight: bold;">Validateur de commande : </span>{{order.userValidated}}</span><br>
                        <span><span style="font-weight: bold;">Montant HT : </span>{{order.htAmout}} €</span><br>
                        <span><span style="font-weight: bold;">Montant TVA : </span>{{order.tvaAmount}} €</span><br>
                        <span><span style="font-weight: bold;">Montant TTC : </span>{{order.ttcAmout}} €</span><br>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="cmd-cmmt-ame">
                    <div class="header-cmmt-ame">
                        <p>Commentaire</p>
                    </div>
                    <div class="body-cmmt-ame">
                        <p style="padding-right: 10px;" id="comment-adress-text">{{order.comment}}</p>
                    </div>
                </div>
                <div class="cmd-cmmt-ame">
                    <div class="header-cmmt-ame">
                        <p>Anomalie</p>
                    </div>
                    <div class="body-cmmt-ame">
                        <p style="padding-right: 10px;" id="anomaly-adress-text">{{order.anomaly}} </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container container-products">
            <!-- <div class="my-row"> -->
                <div class="my-row">
                    <i class="fas fa-box" style="margin-right: 10px;"></i>
                    <p style="font-weight: bold; text-decoration: underline;">Produits ({{order_lines_length}})</p>
                </div>

                <table class="cmd-line-table" style="max-height: 300px;">
                    <thead class="cmd-line-table-thead">
                        <tr>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Code-barre</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Référence</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Désignation</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Description</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Volume</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Poids</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Quantitée</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Prix Uni. HT</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">TVA</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Prix TVA</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Prix TTC</th>
                            <th class="table-cell" style="padding: 5px; margin-right: 5px;">Entrepôt</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr class="cmd-line-table-tbody-tr" *ngFor="let line of order.lines">
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.barecode}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.ref}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.label}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.description}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.volume}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.weight}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.qty}}</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.unitPriceHT}} €</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.montantHT}} €</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.tva}} €</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.unitPriceTTC}} €</td>
                            <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.warehouse}}</td>
                        </tr>
                    </tbody>
                </table>
            <!-- </div> -->
        </div>

        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-10 col-md-4 col-lg-4 cmd-files">
                    <div class="header-cmd-files">
                        <p>Fichier joint(s)</p>
                    </div>
                    <div class="body-cmd-files">
                        <table class="cmd-files-table">
                            <thead class="cmd-files-table-thead">
                                <tr>
                                    <th class="table-cell" style="padding: 5px; margin-right: 5px;"> <!--download--></th>
                                    <th class="table-cell" style="padding: 5px; margin-right: 5px;">Nom</th>
                                    <th class="table-cell" style="padding: 5px; margin-right: 5px;">Taille</th>
                                    <th class="table-cell" style="padding: 5px; margin-right: 5px;">Date création</th>
                                    <th class="table-cell" style="padding: 5px; margin-right: 5px;">Date modification</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr class="cmd-files-table-tbody-tr" *ngFor="let line of order.documents.files">
                                    <td class="table-cell" style="padding: 5px; margin-right: 5px;"><button style="background: transparent; border: none;" (click)="download_bl(line);"><i class="fas fa-download fa-md"></i></button></td>
                                    <td class="table-cell cmd-files-table-tbody-tr-file" style="padding: 5px; margin-right: 5px; text-decoration: underline;" ><a href="https://{{line.data.downloadLink}}" target="_blank">{{line.data.filename}}</a></td>
                                    <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.data.filesize}}</td>
                                    <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.data.filectime}}</td>
                                    <td class="table-cell" style="padding: 5px; margin-right: 5px;">{{line.data.filemtime}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-xs-11 col-sm-11 col-md-7 col-lg-7 cmd-comments">
                    <div class="header-cmd-comments">
                        <p>Messagerie</p>
                    </div>
                    <div id="main-container">
                        <div id="allTheComments">
                            <!-- load from js loadCommentsToHtml() -->
                        </div>
                        <div id="commenting">
                            <form [formGroup]="this.commandeService.commentForm" class="form-group my-row">
                                <div id="cnt-cmt-icon">
                                    <!--<img src="https://source.unsplash.com/random/20x20" alt="">-->
                                    <input type="hidden" id="origin_id" name="origin_id" formControlName="origin_id" class="form-control" value="id">
                                    <input type="hidden" id="fk_soc" name="fk_soc" formControlName="fk_soc" class="form-control" value="null">
                                    <input type="hidden" id="user" name="user" formControlName="user" class="form-control" value="id">
                                </div>
                                <div id="cnt-cmt-msg">
                                    <textarea id="comment-text-filed" formControlName="comment" class="form-control" placeholder="Veuillez commenter la commande {{order.ref}} ici...." cols="20" required></textarea>
                                </div>
                                <div id="end-cmt-btn">
                                    <!--
                                    <div><img src="img/emoji.png" alt="emoji icon "></div>
                                    <div><img id="test-img" src="img/file-folder.png" alt="file attachment icon"></div>
                                    -->
                                    <div>
                                        <button id="submitComment" type="submit" (click)="addCommentOfOrder(this.commandeService.commentForm.value)" title="Envoyer le commentaire">
                                            <i class="far fa-paper-plane fa-lg"></i>
                                        </button>
                                    </div>
                                    <div>
                                        <button id="submitReSyncComment" type="submit" (click)="reSyncComments()" title="Synchroniser les commentaires">
                                            <i class="fas fa-sync-alt fa-lg"></i>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- <div id="main-container-maintenance">
                        <p style="text-decoration: underline;">Le module de messagerie de la commande est en cours de maintenance...</p>
                    </div> -->

                </div>


            </div>
        </div>
    </div>
</div>
